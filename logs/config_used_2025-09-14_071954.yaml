dry_run: false
risk:
  account_equity: 50000
  use_broker_equity: true
  risk_per_trade_pct: 0.01
  atr_multiple_stop: 1.4
  reward_multiple: 2.2
  max_total_risk_pct: 0.1
  bp_utilization: 0.95
  min_shares: 1
  min_stop_pct: 0.0
  max_position_notional_pct: 0.25
  pad_atr_for_pivot_stop: 0.2
signals:
  trend:
    min_points: 3
    require_ema20_gt_ema50: true
    slope_lookback: 3
    min_slope_ema50_bp: 0.0
    allow_ema20_slope_substitute: true
    sep_min_atr_mult: 0.25
    require_close_above_ema50: true
    adx_soft_min: 16
    adx_required_if_sep_below_mult: 0.5
    confirm_n_of_m:
    - 2
    - 3
  structure_donchian: 20
cycle:
  stoch_mode: burns_5_3_2
  from_extreme: true
  lookback: 10
  extreme_lookback: 10
  oversold: 25
  overbought: 75
  confirm_bars: 1
  relax_midline_in_value_zone: 5.0
  rise_bars: 2
  require_d_slope: false
momentum:
  recent_confirm_lookback: 2
  rsi_filter: true
  rsi_threshold: 55
  use_macd_expansion: false
  expansion_lookback: 3
  expansion_min_steps: 1
  zero_line_mode: confirm
  zero_cross_lookback: 3
  macd_abs_min: 0.06
  min_cross_distance: 0.03
volume:
  rvol_window: 20
  rvol_threshold: 1.2
  ad_trend_lookback: 3
  obv_mode: tick
  min_components: 2
  window: 20
regime:
  enabled: true
  adx_min: 16
  atr_pct_min: 0.01
  use_chop: true
  chop_window: 14
  chop_max: 60
logging:
  explain_rejects: true
fundamentals:
  enabled: false
  only_earnings_blackout: false
  exit_before_earnings: false
  earnings_blackout_enabled: false
  min_price: 5
  max_price: 1000
  min_avg_vol: 800000
  earnings_blackout_days: 3
  sectors_allow: []
  sectors_deny: []
  profitability:
    enabled: false
    require_positive_eps_ttm: true
    min_revenue_yoy_growth_pct: 0
  news:
    enabled: false
    lookback_days: 3
    min_sentiment: -0.1
    forbid_red_flags:
    - bankruptcy
    - fraud
    - going concern
  backtest_mode:
    network: live_ok
    cache_dir: cache/fundamentals
    ttl_days: 14
    fail_policy: fail_open
trend_energy:
  min_adx: 20
  min_ema_gap_pct: 0.003
  slope:
    lookback: 20
    min_bps_per_day: 1.5
    method: llr
  pivots:
    enabled: true
    lookback: 60
    require_hh_hl: true
trading:
  min_score: 4
  min_core_energies: 4
  momentum_cycle_or: true
  burns_mode: true
  confirm_before_place: true
  time_in_force: gtc
  order_type: market
  max_signals_per_run: 0
  min_atr_pct: 0.011
  core_at_fill:
    enabled: true
    min_core_energies: 4
    require_same_direction: true
  energy_weights:
    trend: 1.0
    momentum: 1.0
    cycle: 1.0
    sr: 1.0
    scale: 1.0
  patterns:
    enabled: false
    modes:
    - engulf
    - inside_break
    - nr4_break
  filters:
    min_atr_pct: 0.011
    max_extension_pct: 0.06
    min_avg_vol50: 800000
    pullback_tolerance_pct: 0.035
    value_zone_max_ext_pct: 0.025
    value_zone_reject_tail_min: 0.4
    value_zone_reject_tail_min_short: 0.4
    value_zone_touch_atr_max: 0.6
    cycle_oversold: 25
    cycle_overbought: 75
    cycle_cross_lookback: 3
    momentum_hist_expand_lookback: 2
    momentum_macd_min: 0.0
  targets:
    enabled: false
    primary_R: 2.0
    runner_R: 4.0
    scale_out_pct: 0.5
    adx_min_for_runner: 20
  volume_tiebreak_core4: false
  mtf:
    enabled: true
    timeframe: W
    trend_filter: macd
    ema_fast: 20
    ema_slow: 50
    macd_fast: 12
    macd_slow: 26
    macd_signal: 9
    counts_as_energy: false
  filter_at_fill: true
  reject_on_mismatch: false
backtest:
  start_days_ago: 600
  initial_equity: 50000
  commission_per_share: 0.0
  slippage_bps: 2.0
  allow_short: false
  max_open_positions: 1000
  max_total_risk_pct: 0.08
  max_new_trades_per_week: 0
  touch_priority: stop_first
  bp_multiple: 1.0
  halt_on_equity_at_or_below: 0
  force_close_on_end: true
  logging:
    write_evaluations_csv: true
    write_daily_metrics_csv: true
    write_drawdowns_csv: true
    write_meta: true
    print_rollups: true
    print_pending_stats: true
    print_reconciliation: true
    print_top_bottom_trades: true
    print_recap: false
  time_stop:
    enabled: true
    bars: 15
    min_R: 0.5
  early_stop:
    enabled: false
    bars: 0
    min_mfe_R: 0.0
    adverse_atr_mult: 0.0
  gap_fail_safe:
    enabled: true
    gap_R_multiple: 1.8
  loss_guard:
    enabled: true
    mae_R_threshold: 1.2
    bars: 5
  evidence_exit:
    enabled: true
    pre1R_max_bars: 8
    pre1R_min_mfe: 0.5
    momentum_fail: true
    cycle_fail: true
    value_zone_fail: true
    min_hold_bars: 2
    consecutive_fails_default: 1
    momentum_consecutive: null
    cycle_consecutive: 2
    value_zone_consecutive: null
    weights:
      momentum: 0.5
      cycle: 0.5
      value_zone: 1.0
    threshold_single: 1.0
    threshold_two_bar: 1.5
    value_zone_fail_buffer_pct: 0.0015
    cycle_fail_gap_min: 1.5
    momentum_need_zero_cross: false
    setup_overrides:
      pullback:
        cycle_consecutive: 2
      breakout:
        momentum_consecutive: 2
    intraday_recovery:
      enabled: false
      minutes: 60
      require_reclaim: EMA20
  trail_after_R:
    enabled: true
    start_R: 1.0
  stale_data_exit:
    enabled: true
    max_gap_days: 5
  breakeven_at_R: 1.0
  breakeven_intrabar: favor_be
  entry_model:
    type: limit_retrace
    retrace_to: EMA20
    atr_fraction: 0.15
    horizon_days: 3
